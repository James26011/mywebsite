{
  "hash": "f673529ce574511e87945fd862182fa0",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: 전통시장 점포 규모와 인구비율에 관한 분석\nauthor: 이태현\ndate: '2024-07-17'\ncategoty:\n  - project\neditor:\n  markdown:\n    wrap: sentence\n---\n\n# 분석 목적\n전통시장 홍보 목적\n가설 : 만약 인구가 많아도 점포수가 적으면 홍보 필요성이 생긴다.\n여행 루트에 전통시장을 추가?\n\n2024년에 보도된 [세계타임즈](https://m.thesegye.com/news/view/1065580969734925)에서 KB국민카드의 전통시장 카드 소비 데이터 분석을 볼 수 있습니다.\n전통시장의 연령별 매출 비중에서 40%는 60대 이상에서 발생되었습니다.\n50대 26%, 40대 17%, 30대 10%, 20대 7%로 연령대가 높을수록 매출 비중이 높게 나타났습니다.\n\n시장은 인구가 많은 곳에 분포되어 있는데, 전통시장 또한 단순히 인구가 많은 곳이 점포수가 많은지?\n주 고객층인 60대 이상이 많은 지역에 점포수가 많은지?\n알고 싶었다.\n\n2015년 기준으로 60대 이상 비율이 높은 행정구역에 점포수가 많이 분포되어 있는지 분석하기.\n이를 바탕으로 60대 비율이 적고, 인구가 많은 수도권, 광역시에 점포수가 많은지?\n60대 이상 비율이 높고, 인구가 적은 구역에 점포수가 많은지 비교하기.\n\n#### 나이 나누기\n\n`0~19세 = age_under_20`\n\n`20~59세 = age_2050`\n\n`60~100세 이상 = age_over_60`\n\n한국은 공공기관 및 일부 기업이 60세로 정년으로 두고 있기 때문에 위와 같이 노년의 기준을 60세 이상으로 정했습니다.\n미국과 유럽은 60\\~65세 사이를 정년으로 두고 있습니다.\n그리고\n\n# 점포수 크기에 따른 연령층 확인하기\n\n::: {#f633032f .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\n```\n:::\n\n\n#### 2015년 12월 기준 인구조사 파일 불러오기\n\n::: {#dd364772 .cell execution_count=2}\n``` {.python .cell-code}\npop = pd.read_excel('data/pop_2015.xlsx')\n```\n:::\n\n\n#### 원본 숫자 안에 , 를 없애기 (문자열을 숫자열로 바꾸기)\n\n::: {#a4368c73 .cell execution_count=3}\n``` {.python .cell-code}\nsubset = pop.iloc[1:18,1:14]\nfor col in subset.columns:\n    subset[col] = subset[col].str.replace(',', '').astype(int)\nsubset\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>총 인구수</th>\n      <th>연령구간인구수</th>\n      <th>0~9세</th>\n      <th>10~19세</th>\n      <th>20~29세</th>\n      <th>30~39세</th>\n      <th>40~49세</th>\n      <th>50~59세</th>\n      <th>60~69세</th>\n      <th>70~79세</th>\n      <th>80~89세</th>\n      <th>90~99세</th>\n      <th>100세 이상</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>1</th>\n      <td>10022181</td>\n      <td>10022181</td>\n      <td>783299</td>\n      <td>985790</td>\n      <td>1447221</td>\n      <td>1668253</td>\n      <td>1701609</td>\n      <td>1588333</td>\n      <td>1037752</td>\n      <td>582367</td>\n      <td>192801</td>\n      <td>29719</td>\n      <td>5037</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3513777</td>\n      <td>3513777</td>\n      <td>267227</td>\n      <td>345503</td>\n      <td>456514</td>\n      <td>493958</td>\n      <td>568218</td>\n      <td>619703</td>\n      <td>432899</td>\n      <td>239641</td>\n      <td>79128</td>\n      <td>9497</td>\n      <td>1489</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2487829</td>\n      <td>2487829</td>\n      <td>208115</td>\n      <td>289590</td>\n      <td>326755</td>\n      <td>342633</td>\n      <td>438674</td>\n      <td>419653</td>\n      <td>253693</td>\n      <td>148884</td>\n      <td>53282</td>\n      <td>6007</td>\n      <td>543</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2925815</td>\n      <td>2925815</td>\n      <td>271758</td>\n      <td>324530</td>\n      <td>402113</td>\n      <td>455898</td>\n      <td>516105</td>\n      <td>494119</td>\n      <td>255834</td>\n      <td>142147</td>\n      <td>54650</td>\n      <td>7960</td>\n      <td>701</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>1472199</td>\n      <td>1472199</td>\n      <td>143700</td>\n      <td>197005</td>\n      <td>198686</td>\n      <td>221036</td>\n      <td>258049</td>\n      <td>217366</td>\n      <td>127348</td>\n      <td>76489</td>\n      <td>28346</td>\n      <td>3860</td>\n      <td>314</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>1518775</td>\n      <td>1518775</td>\n      <td>145049</td>\n      <td>184964</td>\n      <td>210749</td>\n      <td>228720</td>\n      <td>267008</td>\n      <td>238664</td>\n      <td>134281</td>\n      <td>76136</td>\n      <td>29005</td>\n      <td>3918</td>\n      <td>281</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>1173534</td>\n      <td>1173534</td>\n      <td>116241</td>\n      <td>139958</td>\n      <td>158615</td>\n      <td>180833</td>\n      <td>211988</td>\n      <td>201390</td>\n      <td>100468</td>\n      <td>45817</td>\n      <td>16011</td>\n      <td>2074</td>\n      <td>139</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>210884</td>\n      <td>210884</td>\n      <td>29825</td>\n      <td>23398</td>\n      <td>23043</td>\n      <td>40025</td>\n      <td>37370</td>\n      <td>25872</td>\n      <td>15614</td>\n      <td>10351</td>\n      <td>4718</td>\n      <td>634</td>\n      <td>34</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>12522606</td>\n      <td>12522606</td>\n      <td>1251234</td>\n      <td>1479739</td>\n      <td>1644870</td>\n      <td>1969170</td>\n      <td>2302937</td>\n      <td>1962003</td>\n      <td>1027712</td>\n      <td>616198</td>\n      <td>232931</td>\n      <td>32804</td>\n      <td>3008</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>1549507</td>\n      <td>1549507</td>\n      <td>123275</td>\n      <td>171073</td>\n      <td>184802</td>\n      <td>189754</td>\n      <td>250407</td>\n      <td>269286</td>\n      <td>171452</td>\n      <td>131730</td>\n      <td>49542</td>\n      <td>7578</td>\n      <td>608</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>1583952</td>\n      <td>1583952</td>\n      <td>142319</td>\n      <td>179628</td>\n      <td>196456</td>\n      <td>216258</td>\n      <td>262133</td>\n      <td>260270</td>\n      <td>158194</td>\n      <td>114586</td>\n      <td>47691</td>\n      <td>5977</td>\n      <td>440</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>2077649</td>\n      <td>2077649</td>\n      <td>197236</td>\n      <td>229214</td>\n      <td>244233</td>\n      <td>296909</td>\n      <td>333108</td>\n      <td>318857</td>\n      <td>212781</td>\n      <td>160439</td>\n      <td>74759</td>\n      <td>9433</td>\n      <td>680</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>1869711</td>\n      <td>1869711</td>\n      <td>159824</td>\n      <td>217813</td>\n      <td>218698</td>\n      <td>232517</td>\n      <td>299535</td>\n      <td>295583</td>\n      <td>210933</td>\n      <td>155007</td>\n      <td>70437</td>\n      <td>8725</td>\n      <td>639</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>1908996</td>\n      <td>1908996</td>\n      <td>158142</td>\n      <td>209957</td>\n      <td>206551</td>\n      <td>224820</td>\n      <td>291730</td>\n      <td>308904</td>\n      <td>224235</td>\n      <td>190822</td>\n      <td>82190</td>\n      <td>10892</td>\n      <td>753</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>2702826</td>\n      <td>2702826</td>\n      <td>223394</td>\n      <td>277327</td>\n      <td>311383</td>\n      <td>347557</td>\n      <td>428513</td>\n      <td>456781</td>\n      <td>314821</td>\n      <td>229763</td>\n      <td>99895</td>\n      <td>12658</td>\n      <td>734</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>3364702</td>\n      <td>3364702</td>\n      <td>317867</td>\n      <td>384287</td>\n      <td>394794</td>\n      <td>476814</td>\n      <td>580967</td>\n      <td>551878</td>\n      <td>337382</td>\n      <td>216802</td>\n      <td>92498</td>\n      <td>10817</td>\n      <td>596</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>624395</td>\n      <td>624395</td>\n      <td>63183</td>\n      <td>77313</td>\n      <td>73565</td>\n      <td>85811</td>\n      <td>110642</td>\n      <td>96129</td>\n      <td>57880</td>\n      <td>39258</td>\n      <td>17326</td>\n      <td>3075</td>\n      <td>213</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {#aa6ae625 .cell execution_count=4}\n``` {.python .cell-code}\npop.iloc[1:18,1:14] = subset\npop = pop.iloc[0:18,0:14]\npop\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>행정기관</th>\n      <th>총 인구수</th>\n      <th>연령구간인구수</th>\n      <th>0~9세</th>\n      <th>10~19세</th>\n      <th>20~29세</th>\n      <th>30~39세</th>\n      <th>40~49세</th>\n      <th>50~59세</th>\n      <th>60~69세</th>\n      <th>70~79세</th>\n      <th>80~89세</th>\n      <th>90~99세</th>\n      <th>100세 이상</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>전국</td>\n      <td>51,529,338</td>\n      <td>51,529,338</td>\n      <td>4,601,688</td>\n      <td>5,717,089</td>\n      <td>6,699,048</td>\n      <td>7,670,966</td>\n      <td>8,858,993</td>\n      <td>8,324,791</td>\n      <td>5,073,279</td>\n      <td>3,176,437</td>\n      <td>1,225,210</td>\n      <td>165,628</td>\n      <td>16,209</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>서울특별시</td>\n      <td>10022181</td>\n      <td>10022181</td>\n      <td>783299</td>\n      <td>985790</td>\n      <td>1447221</td>\n      <td>1668253</td>\n      <td>1701609</td>\n      <td>1588333</td>\n      <td>1037752</td>\n      <td>582367</td>\n      <td>192801</td>\n      <td>29719</td>\n      <td>5037</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>부산광역시</td>\n      <td>3513777</td>\n      <td>3513777</td>\n      <td>267227</td>\n      <td>345503</td>\n      <td>456514</td>\n      <td>493958</td>\n      <td>568218</td>\n      <td>619703</td>\n      <td>432899</td>\n      <td>239641</td>\n      <td>79128</td>\n      <td>9497</td>\n      <td>1489</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>대구광역시</td>\n      <td>2487829</td>\n      <td>2487829</td>\n      <td>208115</td>\n      <td>289590</td>\n      <td>326755</td>\n      <td>342633</td>\n      <td>438674</td>\n      <td>419653</td>\n      <td>253693</td>\n      <td>148884</td>\n      <td>53282</td>\n      <td>6007</td>\n      <td>543</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>인천광역시</td>\n      <td>2925815</td>\n      <td>2925815</td>\n      <td>271758</td>\n      <td>324530</td>\n      <td>402113</td>\n      <td>455898</td>\n      <td>516105</td>\n      <td>494119</td>\n      <td>255834</td>\n      <td>142147</td>\n      <td>54650</td>\n      <td>7960</td>\n      <td>701</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>광주광역시</td>\n      <td>1472199</td>\n      <td>1472199</td>\n      <td>143700</td>\n      <td>197005</td>\n      <td>198686</td>\n      <td>221036</td>\n      <td>258049</td>\n      <td>217366</td>\n      <td>127348</td>\n      <td>76489</td>\n      <td>28346</td>\n      <td>3860</td>\n      <td>314</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>대전광역시</td>\n      <td>1518775</td>\n      <td>1518775</td>\n      <td>145049</td>\n      <td>184964</td>\n      <td>210749</td>\n      <td>228720</td>\n      <td>267008</td>\n      <td>238664</td>\n      <td>134281</td>\n      <td>76136</td>\n      <td>29005</td>\n      <td>3918</td>\n      <td>281</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>울산광역시</td>\n      <td>1173534</td>\n      <td>1173534</td>\n      <td>116241</td>\n      <td>139958</td>\n      <td>158615</td>\n      <td>180833</td>\n      <td>211988</td>\n      <td>201390</td>\n      <td>100468</td>\n      <td>45817</td>\n      <td>16011</td>\n      <td>2074</td>\n      <td>139</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>세종특별자치시</td>\n      <td>210884</td>\n      <td>210884</td>\n      <td>29825</td>\n      <td>23398</td>\n      <td>23043</td>\n      <td>40025</td>\n      <td>37370</td>\n      <td>25872</td>\n      <td>15614</td>\n      <td>10351</td>\n      <td>4718</td>\n      <td>634</td>\n      <td>34</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>경기도</td>\n      <td>12522606</td>\n      <td>12522606</td>\n      <td>1251234</td>\n      <td>1479739</td>\n      <td>1644870</td>\n      <td>1969170</td>\n      <td>2302937</td>\n      <td>1962003</td>\n      <td>1027712</td>\n      <td>616198</td>\n      <td>232931</td>\n      <td>32804</td>\n      <td>3008</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>강원도</td>\n      <td>1549507</td>\n      <td>1549507</td>\n      <td>123275</td>\n      <td>171073</td>\n      <td>184802</td>\n      <td>189754</td>\n      <td>250407</td>\n      <td>269286</td>\n      <td>171452</td>\n      <td>131730</td>\n      <td>49542</td>\n      <td>7578</td>\n      <td>608</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>충청북도</td>\n      <td>1583952</td>\n      <td>1583952</td>\n      <td>142319</td>\n      <td>179628</td>\n      <td>196456</td>\n      <td>216258</td>\n      <td>262133</td>\n      <td>260270</td>\n      <td>158194</td>\n      <td>114586</td>\n      <td>47691</td>\n      <td>5977</td>\n      <td>440</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>충청남도</td>\n      <td>2077649</td>\n      <td>2077649</td>\n      <td>197236</td>\n      <td>229214</td>\n      <td>244233</td>\n      <td>296909</td>\n      <td>333108</td>\n      <td>318857</td>\n      <td>212781</td>\n      <td>160439</td>\n      <td>74759</td>\n      <td>9433</td>\n      <td>680</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>전라북도</td>\n      <td>1869711</td>\n      <td>1869711</td>\n      <td>159824</td>\n      <td>217813</td>\n      <td>218698</td>\n      <td>232517</td>\n      <td>299535</td>\n      <td>295583</td>\n      <td>210933</td>\n      <td>155007</td>\n      <td>70437</td>\n      <td>8725</td>\n      <td>639</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>전라남도</td>\n      <td>1908996</td>\n      <td>1908996</td>\n      <td>158142</td>\n      <td>209957</td>\n      <td>206551</td>\n      <td>224820</td>\n      <td>291730</td>\n      <td>308904</td>\n      <td>224235</td>\n      <td>190822</td>\n      <td>82190</td>\n      <td>10892</td>\n      <td>753</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>경상북도</td>\n      <td>2702826</td>\n      <td>2702826</td>\n      <td>223394</td>\n      <td>277327</td>\n      <td>311383</td>\n      <td>347557</td>\n      <td>428513</td>\n      <td>456781</td>\n      <td>314821</td>\n      <td>229763</td>\n      <td>99895</td>\n      <td>12658</td>\n      <td>734</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>경상남도</td>\n      <td>3364702</td>\n      <td>3364702</td>\n      <td>317867</td>\n      <td>384287</td>\n      <td>394794</td>\n      <td>476814</td>\n      <td>580967</td>\n      <td>551878</td>\n      <td>337382</td>\n      <td>216802</td>\n      <td>92498</td>\n      <td>10817</td>\n      <td>596</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>제주특별자치도</td>\n      <td>624395</td>\n      <td>624395</td>\n      <td>63183</td>\n      <td>77313</td>\n      <td>73565</td>\n      <td>85811</td>\n      <td>110642</td>\n      <td>96129</td>\n      <td>57880</td>\n      <td>39258</td>\n      <td>17326</td>\n      <td>3075</td>\n      <td>213</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n#### 각 지역마다 연령층 비율 계산하기\n\n::: {#f4a606cb .cell execution_count=5}\n``` {.python .cell-code}\npop_서울, pop_부산, pop_대구, pop_인천, pop_광주, pop_대전, pop_울산, pop_세종, \\\npop_경기, pop_강원, pop_충북, pop_충남, pop_전북, pop_전남, pop_경북, pop_경남, pop_제주 = [\n    pop['총 인구수'][i] for i in range(1, 18)]\n\n서울_유소년_비율 = (pop.iloc[1,3:5].sum()) / pop_서울* 100\n부산_유소년_비율 = (pop.iloc[2,3:5].sum()) / pop_부산* 100\n대구_유소년_비율 = (pop.iloc[3,3:5].sum()) / pop_대구* 100\n인천_유소년_비율 = (pop.iloc[4,3:5].sum()) / pop_인천* 100\n광주_유소년_비율 = (pop.iloc[5,3:5].sum()) / pop_광주* 100\n대전_유소년_비율 = (pop.iloc[6,3:5].sum()) / pop_대전* 100\n울산_유소년_비율 = (pop.iloc[7,3:5].sum()) / pop_울산* 100\n세종_유소년_비율 = (pop.iloc[8,3:5].sum()) / pop_세종* 100\n경기_유소년_비율 = (pop.iloc[9,3:5].sum()) / pop_경기* 100\n강원_유소년_비율 = (pop.iloc[10,3:5].sum()) / pop_강원* 100\n충북_유소년_비율 = (pop.iloc[11,3:5].sum()) / pop_충북* 100\n충남_유소년_비율 = (pop.iloc[12,3:5].sum()) / pop_충남* 100\n전북_유소년_비율 = (pop.iloc[13,3:5].sum()) / pop_전북* 100\n전남_유소년_비율 = (pop.iloc[14,3:5].sum()) / pop_전남* 100\n경북_유소년_비율 = (pop.iloc[15,3:5].sum()) / pop_경북* 100\n경남_유소년_비율 = (pop.iloc[16,3:5].sum()) / pop_경남* 100\n제주_유소년_비율 = (pop.iloc[17,3:5].sum()) / pop_제주* 100\n\n\n서울_성인_비율 = (pop.iloc[1,5:9].sum()) / pop_서울 * 100\n부산_성인_비율 = (pop.iloc[2,5:9].sum()) / pop_부산* 100\n대구_성인_비율 = (pop.iloc[3,5:9].sum()) / pop_대구* 100\n인천_성인_비율 = (pop.iloc[4,5:9].sum()) / pop_인천* 100\n광주_성인_비율 = (pop.iloc[5,5:9].sum()) / pop_광주* 100\n대전_성인_비율 = (pop.iloc[6,5:9].sum()) / pop_대전* 100\n울산_성인_비율 = (pop.iloc[7,5:9].sum()) / pop_울산* 100\n세종_성인_비율 = (pop.iloc[8,5:9].sum()) / pop_세종* 100\n경기_성인_비율 = (pop.iloc[9,5:9].sum()) / pop_경기* 100\n강원_성인_비율 = (pop.iloc[10,5:9].sum()) / pop_강원* 100\n충북_성인_비율 = (pop.iloc[11,5:9].sum()) / pop_충북* 100\n충남_성인_비율 = (pop.iloc[12,5:9].sum()) / pop_충남* 100\n전북_성인_비율 = (pop.iloc[13,5:9].sum()) / pop_전북* 100\n전남_성인_비율 = (pop.iloc[14,5:9].sum()) / pop_전남* 100\n경북_성인_비율 = (pop.iloc[15,5:9].sum()) / pop_경북* 100\n경남_성인_비율 = (pop.iloc[16,5:9].sum()) / pop_경남* 100\n제주_성인_비율 = (pop.iloc[17,5:9].sum()) / pop_제주* 100\n\n\n서울_노인_비율 = (pop.iloc[1,9:14].sum()) / pop_서울 * 100\n부산_노인_비율 = (pop.iloc[2,9:14].sum()) / pop_부산* 100\n대구_노인_비율 = (pop.iloc[3,9:14].sum()) / pop_대구* 100\n인천_노인_비율 = (pop.iloc[4,9:14].sum()) / pop_인천* 100\n광주_노인_비율 = (pop.iloc[5,9:14].sum()) / pop_광주* 100\n대전_노인_비율 = (pop.iloc[6,9:14].sum()) / pop_대전* 100\n울산_노인_비율 = (pop.iloc[7,9:14].sum()) / pop_울산* 100\n세종_노인_비율 = (pop.iloc[8,9:14].sum()) / pop_세종* 100\n경기_노인_비율 = (pop.iloc[9,9:14].sum()) / pop_경기* 100\n강원_노인_비율 = (pop.iloc[10,9:14].sum()) / pop_강원* 100\n충북_노인_비율 = (pop.iloc[11,9:14].sum()) / pop_충북* 100\n충남_노인_비율 = (pop.iloc[12,9:14].sum()) / pop_충남* 100\n전북_노인_비율 = (pop.iloc[13,9:14].sum()) / pop_전북* 100\n전남_노인_비율 = (pop.iloc[14,9:14].sum()) / pop_전남* 100\n경북_노인_비율 = (pop.iloc[15,9:14].sum()) / pop_경북* 100\n경남_노인_비율 = (pop.iloc[16,9:14].sum()) / pop_경남* 100\n제주_노인_비율 = (pop.iloc[17,9:14].sum()) / pop_제주* 100\n```\n:::\n\n\n#### 인구 비율 DataFrame 만들기\n\n::: {#d70ee2c2 .cell execution_count=6}\n``` {.python .cell-code}\npop_ratio = pd.DataFrame({\n  '서울'      : [서울_유소년_비율, 서울_성인_비율, 서울_노인_비율],\n  '부산'      : [부산_유소년_비율, 부산_성인_비율, 부산_노인_비율],\n  '대구'      : [대구_유소년_비율, 대구_성인_비율, 대구_노인_비율],\n  '인천'    : [인천_유소년_비율, 인천_성인_비율, 인천_노인_비율],\n  '광주'    : [광주_유소년_비율, 광주_성인_비율, 광주_노인_비율],\n  '대전'     : [대전_유소년_비율, 대전_성인_비율, 대전_노인_비율],\n  '울산'      : [울산_유소년_비율, 울산_성인_비율, 울산_노인_비율],\n  '세종'     : [세종_유소년_비율, 세종_성인_비율, 세종_노인_비율],\n  '경기도'   : [경기_유소년_비율, 경기_성인_비율, 경기_노인_비율],\n  '강원'    : [강원_유소년_비율, 강원_성인_비율, 강원_노인_비율],\n  '충청북도'  : [충북_유소년_비율, 충북_성인_비율, 충북_노인_비율],\n  '충청남도'  : [충남_유소년_비율, 충남_성인_비율, 충남_노인_비율],\n  '전라북도'    : [전북_유소년_비율, 전북_성인_비율, 전북_노인_비율],\n  '전라남도'    : [전남_유소년_비율, 전남_성인_비율, 전남_노인_비율],\n  '경상북도' : [경북_유소년_비율, 경북_성인_비율, 경북_노인_비율],\n  '경상남도' : [경남_유소년_비율, 경남_성인_비율, 경남_노인_비율],\n  '제주도'       : [제주_유소년_비율, 제주_성인_비율, 제주_노인_비율]\n  })\n\npop_ratio.index = ['age_under_20','age_2050','age_over_60']\npop_ratio = pop_ratio.transpose()\npop_ratio\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>age_under_20</th>\n      <th>age_2050</th>\n      <th>age_over_60</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>17.651737</td>\n      <td>63.912396</td>\n      <td>18.435867</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>17.437931</td>\n      <td>60.857391</td>\n      <td>21.704678</td>\n    </tr>\n    <tr>\n      <th>대구</th>\n      <td>20.005595</td>\n      <td>61.407557</td>\n      <td>18.586848</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>20.380236</td>\n      <td>63.853490</td>\n      <td>15.766274</td>\n    </tr>\n    <tr>\n      <th>광주</th>\n      <td>23.142591</td>\n      <td>60.802718</td>\n      <td>16.054691</td>\n    </tr>\n    <tr>\n      <th>대전</th>\n      <td>21.728893</td>\n      <td>62.230482</td>\n      <td>16.040625</td>\n    </tr>\n    <tr>\n      <th>울산</th>\n      <td>21.831408</td>\n      <td>64.150336</td>\n      <td>14.018256</td>\n    </tr>\n    <tr>\n      <th>세종</th>\n      <td>25.238046</td>\n      <td>59.895488</td>\n      <td>14.866467</td>\n    </tr>\n    <tr>\n      <th>경기도</th>\n      <td>21.808344</td>\n      <td>62.918054</td>\n      <td>15.273602</td>\n    </tr>\n    <tr>\n      <th>강원</th>\n      <td>18.996236</td>\n      <td>57.711840</td>\n      <td>23.291924</td>\n    </tr>\n    <tr>\n      <th>충청북도</th>\n      <td>20.325553</td>\n      <td>59.036953</td>\n      <td>20.637494</td>\n    </tr>\n    <tr>\n      <th>충청남도</th>\n      <td>20.525604</td>\n      <td>57.425821</td>\n      <td>22.048575</td>\n    </tr>\n    <tr>\n      <th>전라북도</th>\n      <td>20.197613</td>\n      <td>55.962285</td>\n      <td>23.840101</td>\n    </tr>\n    <tr>\n      <th>전라남도</th>\n      <td>19.282335</td>\n      <td>54.060092</td>\n      <td>26.657573</td>\n    </tr>\n    <tr>\n      <th>경상북도</th>\n      <td>18.525832</td>\n      <td>57.134052</td>\n      <td>24.340117</td>\n    </tr>\n    <tr>\n      <th>경상남도</th>\n      <td>20.868237</td>\n      <td>59.572973</td>\n      <td>19.558790</td>\n    </tr>\n    <tr>\n      <th>제주도</th>\n      <td>22.501141</td>\n      <td>58.640284</td>\n      <td>18.858575</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {#fb28e6ef .cell execution_count=7}\n``` {.python .cell-code}\n# 지역 칼럼 추가하기\npop_ratio['region'] = ['서울특별시', '부산광역시', '대구광역시', '인천광역시', '광주광역시', '대전광역시', '울산광역시', '세종특별시', '경기도', '강원도', '충청북도', '충청남도', '전라북도', '전라남도', '경상북도', '경상남도', '제주도']\n\npop_ratio\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>age_under_20</th>\n      <th>age_2050</th>\n      <th>age_over_60</th>\n      <th>region</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>서울</th>\n      <td>17.651737</td>\n      <td>63.912396</td>\n      <td>18.435867</td>\n      <td>서울특별시</td>\n    </tr>\n    <tr>\n      <th>부산</th>\n      <td>17.437931</td>\n      <td>60.857391</td>\n      <td>21.704678</td>\n      <td>부산광역시</td>\n    </tr>\n    <tr>\n      <th>대구</th>\n      <td>20.005595</td>\n      <td>61.407557</td>\n      <td>18.586848</td>\n      <td>대구광역시</td>\n    </tr>\n    <tr>\n      <th>인천</th>\n      <td>20.380236</td>\n      <td>63.853490</td>\n      <td>15.766274</td>\n      <td>인천광역시</td>\n    </tr>\n    <tr>\n      <th>광주</th>\n      <td>23.142591</td>\n      <td>60.802718</td>\n      <td>16.054691</td>\n      <td>광주광역시</td>\n    </tr>\n    <tr>\n      <th>대전</th>\n      <td>21.728893</td>\n      <td>62.230482</td>\n      <td>16.040625</td>\n      <td>대전광역시</td>\n    </tr>\n    <tr>\n      <th>울산</th>\n      <td>21.831408</td>\n      <td>64.150336</td>\n      <td>14.018256</td>\n      <td>울산광역시</td>\n    </tr>\n    <tr>\n      <th>세종</th>\n      <td>25.238046</td>\n      <td>59.895488</td>\n      <td>14.866467</td>\n      <td>세종특별시</td>\n    </tr>\n    <tr>\n      <th>경기도</th>\n      <td>21.808344</td>\n      <td>62.918054</td>\n      <td>15.273602</td>\n      <td>경기도</td>\n    </tr>\n    <tr>\n      <th>강원</th>\n      <td>18.996236</td>\n      <td>57.711840</td>\n      <td>23.291924</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>충청북도</th>\n      <td>20.325553</td>\n      <td>59.036953</td>\n      <td>20.637494</td>\n      <td>충청북도</td>\n    </tr>\n    <tr>\n      <th>충청남도</th>\n      <td>20.525604</td>\n      <td>57.425821</td>\n      <td>22.048575</td>\n      <td>충청남도</td>\n    </tr>\n    <tr>\n      <th>전라북도</th>\n      <td>20.197613</td>\n      <td>55.962285</td>\n      <td>23.840101</td>\n      <td>전라북도</td>\n    </tr>\n    <tr>\n      <th>전라남도</th>\n      <td>19.282335</td>\n      <td>54.060092</td>\n      <td>26.657573</td>\n      <td>전라남도</td>\n    </tr>\n    <tr>\n      <th>경상북도</th>\n      <td>18.525832</td>\n      <td>57.134052</td>\n      <td>24.340117</td>\n      <td>경상북도</td>\n    </tr>\n    <tr>\n      <th>경상남도</th>\n      <td>20.868237</td>\n      <td>59.572973</td>\n      <td>19.558790</td>\n      <td>경상남도</td>\n    </tr>\n    <tr>\n      <th>제주도</th>\n      <td>22.501141</td>\n      <td>58.640284</td>\n      <td>18.858575</td>\n      <td>제주도</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n# 이전 데이터 불러오기\n\n::: {#b0e3db89 .cell execution_count=8}\n``` {.python .cell-code}\n# 데이터 불러오기\nmarket = pd.read_excel(\"data/traditionalmarket.xlsx\")\n\n# 분석을 위한 복사본 만들기\nmarket2 = market.copy()\n```\n:::\n\n\n::: {#1e09300d .cell execution_count=9}\n``` {.python .cell-code}\n# 엑셀의 변수 한글을 영어로 rename\nmarket2 = market2.rename(columns = {\"시장명\"              : \"market_name\", \n                                    \"시장유형\"            : \"type\",\n                                    \"소재지도로명주소\"    : \"adress_road\",\n                                    \"시장개설주기\"        : \"open_period\",\n                                    \"소재지지번주소\"      : \"address_old\",\n                                    \"점포수\"              : \"market_count\",\n                                    \"사용가능상품권\"      : \"certificate\",\n                                    \"공중화장실 보유여부\" :\"public_toilet\",\n                                    \"주차장 보유여부\"     : \"parking_lot\",\n                                    \"개설년도\"            : \"year\",\n                                    \"데이터기준일자\"      : \"data_date\"})\n```\n:::\n\n\n::: {#30c151cd .cell execution_count=10}\n``` {.python .cell-code}\n# 데이터의 정보 확인하기\nmarket2.describe()\nmarket2[\"public_toilet\"].info()\nmarket2[\"parking_lot\"].info()\nmarket2['market_count'].describe()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<class 'pandas.core.series.Series'>\nRangeIndex: 1439 entries, 0 to 1438\nSeries name: public_toilet\nNon-Null Count  Dtype \n--------------  ----- \n1439 non-null   object\ndtypes: object(1)\nmemory usage: 11.4+ KB\n<class 'pandas.core.series.Series'>\nRangeIndex: 1439 entries, 0 to 1438\nSeries name: parking_lot\nNon-Null Count  Dtype \n--------------  ----- \n1439 non-null   object\ndtypes: object(1)\nmemory usage: 11.4+ KB\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=10}\n```\ncount    1439.000000\nmean      143.907575\nstd       298.989963\nmin         0.000000\n25%        50.000000\n50%        80.000000\n75%       134.000000\nmax      5852.000000\nName: market_count, dtype: float64\n```\n:::\n:::\n\n\n::: {#7f4c246b .cell execution_count=11}\n``` {.python .cell-code}\n# 점포수에 따른 규모 크기를 설명해주는 변수 만들기\nmarket2 = market2.assign(market_scale = np.where(market2[\"market_count\"] >= 134, \"large\", \n                                        np.where(market2[\"market_count\"] >= 50, \"medium\", \"small\")))\n\n# 편의시설의 유무에 따른 레벨링 하기\nmarket2['level'] = np.where((market2['public_toilet'] == 'Y') & (market2['parking_lot'] == 'Y'), 'high', \n                   np.where((market2['public_toilet'] == 'N') & (market2['public_toilet'] == 'N') , 'low', 'intermediate'))\n```\n:::\n\n\n::: {#88f899f2 .cell execution_count=12}\n``` {.python .cell-code}\n# 확인 절차\nmarket2.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=12}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>market_name</th>\n      <th>type</th>\n      <th>adress_road</th>\n      <th>open_period</th>\n      <th>address_old</th>\n      <th>market_count</th>\n      <th>certificate</th>\n      <th>public_toilet</th>\n      <th>parking_lot</th>\n      <th>year</th>\n      <th>data_date</th>\n      <th>market_scale</th>\n      <th>level</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>중앙시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 금성로 21</td>\n      <td>상설</td>\n      <td>강원 강릉시 성남동 50번지</td>\n      <td>229</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>1980.0</td>\n      <td>2015-12-31</td>\n      <td>large</td>\n      <td>high</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>강릉동부시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 옥천로 48</td>\n      <td>상설</td>\n      <td>강원 강릉시 옥천동 223번지</td>\n      <td>91</td>\n      <td>NaN</td>\n      <td>Y</td>\n      <td>N</td>\n      <td>2014.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>intermediate</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>강릉서부시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 임영로 155번길 6</td>\n      <td>상설</td>\n      <td>강원 강릉시 용강동 29번지</td>\n      <td>109</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>1977.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>주문진종합시장</td>\n      <td>상설+정기</td>\n      <td>강원도 강릉시 주문진읍 구 시장길</td>\n      <td>5일</td>\n      <td>강원 강릉시 주문진읍 주문리 321-52번지</td>\n      <td>77</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2006.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>주문진수산시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 주문진읍 시장1길 4-1</td>\n      <td>상설</td>\n      <td>강원 강릉시 주문진읍 주문리 312-91번지</td>\n      <td>42</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2007.0</td>\n      <td>2015-12-31</td>\n      <td>small</td>\n      <td>high</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {#d8d49864 .cell execution_count=13}\n``` {.python .cell-code}\n# 그래프 그리기\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# x축을 편의 시설 레벨\nsns.countplot(data = market2, x = 'level', hue = 'level')\nplt.show()\n\n# 그래프 그리기 위한 df 생성\n# 시장 유형와 규모 크기에 따른 그룹화 / 규모 크기 갯수 추가\ndf = market2.groupby([\"type\", \"market_scale\"], as_index = False) \\\n            .agg(market_count = (\"market_scale\", \"count\"))\n\n# 규모 크기에 따른 내림차순\ndf.sort_values('market_count', ascending = False)\n\n# 만든 df를 x축에 시장 유형, y축은 규모 크기에 따른 점포 갯수\nsns.barplot(data = df, x = 'type', y = 'market_count', hue = 'market_scale')\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-14-output-1.png){width=593 height=429}\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nC:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\IPython\\core\\pylabtools.py:152: UserWarning:\n\nGlyph 49345 (\\N{HANGUL SYLLABLE SANG}) missing from current font.\n\nC:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\IPython\\core\\pylabtools.py:152: UserWarning:\n\nGlyph 49444 (\\N{HANGUL SYLLABLE SEOL}) missing from current font.\n\nC:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\IPython\\core\\pylabtools.py:152: UserWarning:\n\nGlyph 51221 (\\N{HANGUL SYLLABLE JEONG}) missing from current font.\n\nC:\\Users\\USER\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\IPython\\core\\pylabtools.py:152: UserWarning:\n\nGlyph 44592 (\\N{HANGUL SYLLABLE GI}) missing from current font.\n\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-14-output-3.png){width=593 height=429}\n:::\n:::\n\n\n::: {#f26b0655 .cell execution_count=14}\n``` {.python .cell-code}\nplt.clf()\n```\n\n::: {.cell-output .cell-output-display}\n```\n<Figure size 672x480 with 0 Axes>\n```\n:::\n:::\n\n\n::: {#c563bcc2 .cell execution_count=15}\n``` {.python .cell-code}\nmarket2['region'] = market2['adress_road'].str.split().str[0]\nmarket2\n```\n\n::: {.cell-output .cell-output-display execution_count=15}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>market_name</th>\n      <th>type</th>\n      <th>adress_road</th>\n      <th>open_period</th>\n      <th>address_old</th>\n      <th>market_count</th>\n      <th>certificate</th>\n      <th>public_toilet</th>\n      <th>parking_lot</th>\n      <th>year</th>\n      <th>data_date</th>\n      <th>market_scale</th>\n      <th>level</th>\n      <th>region</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>중앙시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 금성로 21</td>\n      <td>상설</td>\n      <td>강원 강릉시 성남동 50번지</td>\n      <td>229</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>1980.0</td>\n      <td>2015-12-31</td>\n      <td>large</td>\n      <td>high</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>강릉동부시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 옥천로 48</td>\n      <td>상설</td>\n      <td>강원 강릉시 옥천동 223번지</td>\n      <td>91</td>\n      <td>NaN</td>\n      <td>Y</td>\n      <td>N</td>\n      <td>2014.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>intermediate</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>강릉서부시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 임영로 155번길 6</td>\n      <td>상설</td>\n      <td>강원 강릉시 용강동 29번지</td>\n      <td>109</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>1977.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>주문진종합시장</td>\n      <td>상설+정기</td>\n      <td>강원도 강릉시 주문진읍 구 시장길</td>\n      <td>5일</td>\n      <td>강원 강릉시 주문진읍 주문리 321-52번지</td>\n      <td>77</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2006.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>주문진수산시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 주문진읍 시장1길 4-1</td>\n      <td>상설</td>\n      <td>강원 강릉시 주문진읍 주문리 312-91번지</td>\n      <td>42</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2007.0</td>\n      <td>2015-12-31</td>\n      <td>small</td>\n      <td>high</td>\n      <td>강원도</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>1434</th>\n      <td>엄정내창시장</td>\n      <td>상설+정기</td>\n      <td>충청북도 충주시 엄정면 내창로 191-1</td>\n      <td>5일</td>\n      <td>충북 충주시 엄정면 미내리 159-15</td>\n      <td>98</td>\n      <td>온누리상품권</td>\n      <td>N</td>\n      <td>N</td>\n      <td>2013.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>low</td>\n      <td>충청북도</td>\n    </tr>\n    <tr>\n      <th>1435</th>\n      <td>중앙공설시장</td>\n      <td>상설</td>\n      <td>충청북도 충주시 예성로 168</td>\n      <td>상설</td>\n      <td>충북 충주시 성서동 306</td>\n      <td>65</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2005.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>충청북도</td>\n    </tr>\n    <tr>\n      <th>1436</th>\n      <td>남부시장</td>\n      <td>상설</td>\n      <td>충청북도 충주시 지곡10길 38-1</td>\n      <td>상설</td>\n      <td>충북 충주시 지현동 1431</td>\n      <td>61</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2005.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>충청북도</td>\n    </tr>\n    <tr>\n      <th>1437</th>\n      <td>충주자유시장</td>\n      <td>상설+정기</td>\n      <td>충청북도 충주시 충인6길 16</td>\n      <td>5일</td>\n      <td>충북 충주시 충인동 325</td>\n      <td>274</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2005.0</td>\n      <td>2015-12-31</td>\n      <td>large</td>\n      <td>high</td>\n      <td>충청북도</td>\n    </tr>\n    <tr>\n      <th>1438</th>\n      <td>목행시장</td>\n      <td>상설+정기</td>\n      <td>충청북도 충주시 행정9길 35</td>\n      <td>5일</td>\n      <td>충북 충주시 목행동 676-44</td>\n      <td>92</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2013.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>충청북도</td>\n    </tr>\n  </tbody>\n</table>\n<p>1439 rows × 14 columns</p>\n</div>\n```\n:::\n:::\n\n\n# 인구 데이터와 시장 데이터 합치기\n\n::: {#80fb7de8 .cell execution_count=16}\n``` {.python .cell-code}\nmarket_pop = pd.merge(market2, pop_ratio, how = 'left', on = 'region')\nmarket_pop\n```\n\n::: {.cell-output .cell-output-display execution_count=16}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>market_name</th>\n      <th>type</th>\n      <th>adress_road</th>\n      <th>open_period</th>\n      <th>address_old</th>\n      <th>market_count</th>\n      <th>certificate</th>\n      <th>public_toilet</th>\n      <th>parking_lot</th>\n      <th>year</th>\n      <th>data_date</th>\n      <th>market_scale</th>\n      <th>level</th>\n      <th>region</th>\n      <th>age_under_20</th>\n      <th>age_2050</th>\n      <th>age_over_60</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>중앙시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 금성로 21</td>\n      <td>상설</td>\n      <td>강원 강릉시 성남동 50번지</td>\n      <td>229</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>1980.0</td>\n      <td>2015-12-31</td>\n      <td>large</td>\n      <td>high</td>\n      <td>강원도</td>\n      <td>18.996236</td>\n      <td>57.711840</td>\n      <td>23.291924</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>강릉동부시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 옥천로 48</td>\n      <td>상설</td>\n      <td>강원 강릉시 옥천동 223번지</td>\n      <td>91</td>\n      <td>NaN</td>\n      <td>Y</td>\n      <td>N</td>\n      <td>2014.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>intermediate</td>\n      <td>강원도</td>\n      <td>18.996236</td>\n      <td>57.711840</td>\n      <td>23.291924</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>강릉서부시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 임영로 155번길 6</td>\n      <td>상설</td>\n      <td>강원 강릉시 용강동 29번지</td>\n      <td>109</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>1977.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>강원도</td>\n      <td>18.996236</td>\n      <td>57.711840</td>\n      <td>23.291924</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>주문진종합시장</td>\n      <td>상설+정기</td>\n      <td>강원도 강릉시 주문진읍 구 시장길</td>\n      <td>5일</td>\n      <td>강원 강릉시 주문진읍 주문리 321-52번지</td>\n      <td>77</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2006.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>강원도</td>\n      <td>18.996236</td>\n      <td>57.711840</td>\n      <td>23.291924</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>주문진수산시장</td>\n      <td>상설</td>\n      <td>강원도 강릉시 주문진읍 시장1길 4-1</td>\n      <td>상설</td>\n      <td>강원 강릉시 주문진읍 주문리 312-91번지</td>\n      <td>42</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2007.0</td>\n      <td>2015-12-31</td>\n      <td>small</td>\n      <td>high</td>\n      <td>강원도</td>\n      <td>18.996236</td>\n      <td>57.711840</td>\n      <td>23.291924</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>1434</th>\n      <td>엄정내창시장</td>\n      <td>상설+정기</td>\n      <td>충청북도 충주시 엄정면 내창로 191-1</td>\n      <td>5일</td>\n      <td>충북 충주시 엄정면 미내리 159-15</td>\n      <td>98</td>\n      <td>온누리상품권</td>\n      <td>N</td>\n      <td>N</td>\n      <td>2013.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>low</td>\n      <td>충청북도</td>\n      <td>20.325553</td>\n      <td>59.036953</td>\n      <td>20.637494</td>\n    </tr>\n    <tr>\n      <th>1435</th>\n      <td>중앙공설시장</td>\n      <td>상설</td>\n      <td>충청북도 충주시 예성로 168</td>\n      <td>상설</td>\n      <td>충북 충주시 성서동 306</td>\n      <td>65</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2005.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>충청북도</td>\n      <td>20.325553</td>\n      <td>59.036953</td>\n      <td>20.637494</td>\n    </tr>\n    <tr>\n      <th>1436</th>\n      <td>남부시장</td>\n      <td>상설</td>\n      <td>충청북도 충주시 지곡10길 38-1</td>\n      <td>상설</td>\n      <td>충북 충주시 지현동 1431</td>\n      <td>61</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2005.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>충청북도</td>\n      <td>20.325553</td>\n      <td>59.036953</td>\n      <td>20.637494</td>\n    </tr>\n    <tr>\n      <th>1437</th>\n      <td>충주자유시장</td>\n      <td>상설+정기</td>\n      <td>충청북도 충주시 충인6길 16</td>\n      <td>5일</td>\n      <td>충북 충주시 충인동 325</td>\n      <td>274</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2005.0</td>\n      <td>2015-12-31</td>\n      <td>large</td>\n      <td>high</td>\n      <td>충청북도</td>\n      <td>20.325553</td>\n      <td>59.036953</td>\n      <td>20.637494</td>\n    </tr>\n    <tr>\n      <th>1438</th>\n      <td>목행시장</td>\n      <td>상설+정기</td>\n      <td>충청북도 충주시 행정9길 35</td>\n      <td>5일</td>\n      <td>충북 충주시 목행동 676-44</td>\n      <td>92</td>\n      <td>온누리상품권</td>\n      <td>Y</td>\n      <td>Y</td>\n      <td>2013.0</td>\n      <td>2015-12-31</td>\n      <td>medium</td>\n      <td>high</td>\n      <td>충청북도</td>\n      <td>20.325553</td>\n      <td>59.036953</td>\n      <td>20.637494</td>\n    </tr>\n  </tbody>\n</table>\n<p>1439 rows × 17 columns</p>\n</div>\n```\n:::\n:::\n\n\n# 60대 이상 비율의 계급 나누기\n\n::: {#50bcf125 .cell execution_count=17}\n``` {.python .cell-code}\nmarket_pop['age_over_60'].describe()\n```\n\n::: {.cell-output .cell-output-display execution_count=17}\n```\ncount    1439.000000\nmean       20.253145\nstd         3.405308\nmin        14.018256\n25%        18.435867\n50%        19.558790\n75%        23.291924\nmax        26.657573\nName: age_over_60, dtype: float64\n```\n:::\n:::\n\n\n평균 20.25% 보다 높은 지역을 60대 이상 비율이 많다고 정의\n\n# 표 그리기\n\n::: {#3a6c639b .cell execution_count=18}\n``` {.python .cell-code}\n# 평균 변수 지정\nmean_60 = market_pop['age_over_60'].mean()\n\n# 집단 나누기\nmarket_pop.groupby('market_scale') \\\n          .agg(mean = ('age_over_60','mean'))\n```\n\n::: {.cell-output .cell-output-display execution_count=18}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>mean</th>\n    </tr>\n    <tr>\n      <th>market_scale</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>large</th>\n      <td>19.663038</td>\n    </tr>\n    <tr>\n      <th>medium</th>\n      <td>20.003572</td>\n    </tr>\n    <tr>\n      <th>small</th>\n      <td>21.366309</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}